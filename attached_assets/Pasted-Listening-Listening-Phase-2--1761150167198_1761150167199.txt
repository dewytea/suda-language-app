Listening ëª¨ë“ˆì— ë‹¨ì–´ ì‚¬ì „ ê¸°ëŠ¥ê³¼ ë‹¨ì–´ì¥ì„ ì¶”ê°€í•´ì¤˜.

=== Listening ì‹¬í™”: Phase 2 - ë‹¨ì–´ ì‚¬ì „ + ë‹¨ì–´ì¥ ===

ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” ìŠ¤í¬ë¦½íŠ¸ì˜ ë‹¨ì–´ë¥¼ í´ë¦­í•˜ë©´
ëœ»ì´ ë‚˜ì˜¤ê³ , ë°œìŒì„ ë“¤ì„ ìˆ˜ ìˆìœ¼ë©°,
ë‹¨ì–´ì¥ì— ì €ì¥í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ë§Œë“¤ ê±°ì•¼.

=== ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„± ===

1. vocabulary_words í…Œì´ë¸” (ë‹¨ì–´ ì‚¬ì „):
```sql
CREATE TABLE vocabulary_words (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  word TEXT UNIQUE NOT NULL,
  definition TEXT NOT NULL,
  phonetic TEXT,
  part_of_speech TEXT, -- noun, verb, adjective, etc.
  example_sentence TEXT,
  difficulty_level INTEGER CHECK (difficulty_level BETWEEN 1 AND 5),
  frequency_rank INTEGER, -- ì‚¬ìš© ë¹ˆë„
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_vocabulary_words_word ON vocabulary_words(word);
CREATE INDEX idx_vocabulary_words_difficulty ON vocabulary_words(difficulty_level);

-- ê¸°ë³¸ ë‹¨ì–´ ë°ì´í„° ì¶”ê°€ (100ê°œ ì •ë„)
INSERT INTO vocabulary_words (word, definition, phonetic, part_of_speech, example_sentence, difficulty_level, frequency_rank) VALUES
-- ì´ˆê¸‰ (Level 1-2)
('hello', 'ì¸ì‚¬ë§, ì•ˆë…•', '/hÉ™ËˆlÉ™ÊŠ/', 'interjection', 'Hello, how are you today?', 1, 100),
('good', 'ì¢‹ì€, í›Œë¥­í•œ', '/É¡ÊŠd/', 'adjective', 'That is a good idea.', 1, 50),
('time', 'ì‹œê°„', '/taÉªm/', 'noun', 'What time is it?', 1, 30),
('day', 'ë‚ , í•˜ë£¨', '/deÉª/', 'noun', 'Have a nice day!', 1, 40),
('thank', 'ê°ì‚¬í•˜ë‹¤', '/Î¸Ã¦Å‹k/', 'verb', 'Thank you for your help.', 1, 80),
('help', 'ë•ë‹¤, ë„ì›€', '/help/', 'verb/noun', 'Can you help me?', 1, 60),
('water', 'ë¬¼', '/ËˆwÉ”ËtÉ™r/', 'noun', 'I need some water.', 1, 90),
('food', 'ìŒì‹', '/fuËd/', 'noun', 'The food is delicious.', 1, 85),
('name', 'ì´ë¦„', '/neÉªm/', 'noun', 'What is your name?', 1, 70),
('year', 'ë…„, í•´', '/jÉªÉ™r/', 'noun', 'I am twenty years old.', 1, 45),

-- ì¤‘ê¸‰ (Level 3)
('important', 'ì¤‘ìš”í•œ', '/ÉªmËˆpÉ”Ërtnt/', 'adjective', 'This is very important.', 3, 150),
('understand', 'ì´í•´í•˜ë‹¤', '/ËŒÊŒndÉ™rËˆstÃ¦nd/', 'verb', 'I understand your concern.', 3, 120),
('different', 'ë‹¤ë¥¸, ìƒì´í•œ', '/ËˆdÉªfrÉ™nt/', 'adjective', 'Every situation is different.', 3, 110),
('business', 'ì‚¬ì—…, ì—…ë¬´', '/ËˆbÉªznÉ™s/', 'noun', 'She runs her own business.', 3, 140),
('develop', 'ê°œë°œí•˜ë‹¤, ë°œì „ì‹œí‚¤ë‹¤', '/dÉªËˆvelÉ™p/', 'verb', 'We need to develop new skills.', 3, 130),
('system', 'ì‹œìŠ¤í…œ, ì²´ê³„', '/ËˆsÉªstÉ™m/', 'noun', 'The education system needs reform.', 3, 125),
('provide', 'ì œê³µí•˜ë‹¤', '/prÉ™ËˆvaÉªd/', 'verb', 'The company provides training.', 3, 135),
('include', 'í¬í•¨í•˜ë‹¤', '/ÉªnËˆkluËd/', 'verb', 'The price includes breakfast.', 3, 115),
('continue', 'ê³„ì†í•˜ë‹¤', '/kÉ™nËˆtÉªnjuË/', 'verb', 'Please continue reading.', 3, 145),
('consider', 'ê³ ë ¤í•˜ë‹¤, ìƒê°í•˜ë‹¤', '/kÉ™nËˆsÉªdÉ™r/', 'verb', 'We should consider all options.', 3, 155),

-- ê³ ê¸‰ (Level 4-5)
('artificial', 'ì¸ê³µì˜, ì¸ìœ„ì ì¸', '/ËŒÉ‘ËrtÉªËˆfÉªÊƒl/', 'adjective', 'Artificial intelligence is advancing rapidly.', 4, 300),
('intelligence', 'ì§€ëŠ¥, ì •ë³´', '/ÉªnËˆtelÉªdÊ’É™ns/', 'noun', 'Human intelligence is remarkable.', 4, 250),
('transform', 'ë³€í˜•ì‹œí‚¤ë‹¤, ë³€í™˜í•˜ë‹¤', '/trÃ¦nsËˆfÉ”Ërm/', 'verb', 'Technology will transform education.', 4, 280),
('research', 'ì—°êµ¬', '/rÉªËˆsÉœËrtÊƒ/', 'noun/verb', 'Scientific research takes time.', 4, 200),
('investment', 'íˆ¬ì', '/ÉªnËˆvestmÉ™nt/', 'noun', 'This requires significant investment.', 4, 220),
('application', 'ì‘ìš©, ì‹ ì²­', '/ËŒÃ¦plÉªËˆkeÉªÊƒn/', 'noun', 'Mobile applications are everywhere.', 4, 240),
('prediction', 'ì˜ˆì¸¡', '/prÉªËˆdÉªkÊƒn/', 'noun', 'Weather predictions are improving.', 4, 320),
('technology', 'ê¸°ìˆ ', '/tekËˆnÉ‘ËlÉ™dÊ’i/', 'noun', 'New technology changes lives.', 4, 180),
('privacy', 'í”„ë¼ì´ë²„ì‹œ, ì‚¬ìƒí™œ', '/ËˆpraÉªvÉ™si/', 'noun', 'Privacy concerns are growing.', 4, 290),
('ethics', 'ìœ¤ë¦¬', '/ËˆeÎ¸Éªks/', 'noun', 'Medical ethics are important.', 5, 400),
('melting', 'ë…¹ëŠ”, ìš©í•´', '/ËˆmeltÉªÅ‹/', 'verb/adjective', 'Ice caps are melting rapidly.', 4, 350),
('species', 'ì¢…, ì¢…ë¥˜', '/ËˆspiËÊƒiËz/', 'noun', 'Many species face extinction.', 4, 270),
('habitat', 'ì„œì‹ì§€', '/ËˆhÃ¦bÉªtÃ¦t/', 'noun', 'Wildlife habitats are shrinking.', 4, 380),
('renewable', 'ì¬ìƒ ê°€ëŠ¥í•œ', '/rÉªËˆnuËÉ™bl/', 'adjective', 'Renewable energy is the future.', 4, 360),
('sustainable', 'ì§€ì† ê°€ëŠ¥í•œ', '/sÉ™ËˆsteÉªnÉ™bl/', 'adjective', 'We need sustainable practices.', 4, 340),
('extinction', 'ë©¸ì¢…', '/ÉªkËˆstÉªÅ‹kÊƒn/', 'noun', 'Climate change threatens extinction.', 5, 420),
('achievement', 'ì„±ì·¨, ì—…ì ', '/É™ËˆtÊƒiËvmÉ™nt/', 'noun', 'This is a great achievement.', 4, 260),
('essential', 'í•„ìˆ˜ì ì¸', '/ÉªËˆsenÊƒl/', 'adjective', 'Water is essential for life.', 4, 230),
('invisible', 'ë³´ì´ì§€ ì•ŠëŠ”', '/ÉªnËˆvÉªzÉ™bl/', 'adjective', 'Love is invisible but real.', 4, 370),
('satisfied', 'ë§Œì¡±í•œ', '/ËˆsÃ¦tÉªsfaÉªd/', 'adjective', 'I am satisfied with the result.', 3, 190);

-- ë” ë§ì€ ë‹¨ì–´ ì¶”ê°€ (ì´ 50-100ê°œ ì •ë„)
-- ì‹¤ì œë¡œëŠ” ë” ë§ì´ ì¶”ê°€í•˜ë˜, ì˜ˆì‹œë§Œ ì—¬ê¸° í¬í•¨
```

2. user_vocabulary í…Œì´ë¸” (ì‚¬ìš©ì ë‹¨ì–´ì¥):
```sql
CREATE TABLE user_vocabulary (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  word_id UUID REFERENCES vocabulary_words(id) ON DELETE CASCADE,
  learned BOOLEAN DEFAULT false,
  times_reviewed INTEGER DEFAULT 0,
  last_reviewed_at TIMESTAMP WITH TIME ZONE,
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id, word_id)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_user_vocabulary_user_id ON user_vocabulary(user_id);
CREATE INDEX idx_user_vocabulary_word_id ON user_vocabulary(word_id);
CREATE INDEX idx_user_vocabulary_learned ON user_vocabulary(learned);
```

=== ë‹¨ì–´ í´ë¦­ ê°€ëŠ¥í•œ í…ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸ ===

components/listening/ClickableText.tsx ìƒì„±:
```tsx
'use client'

import { useState, useRef, useEffect } from 'react'
import { Volume2, BookmarkPlus, Check } from 'lucide-react'

interface Word {
  word: string
  definition: string
  phonetic?: string
  part_of_speech?: string
  example_sentence?: string
}

interface ClickableTextProps {
  text: string
  onWordClick?: (word: string) => void
}

export default function ClickableText({ text, onWordClick }: ClickableTextProps) {
  const [selectedWord, setSelectedWord] = useState<string | null>(null)
  const [wordData, setWordData] = useState<Word | null>(null)
  const [popupPosition, setPopupPosition] = useState({ x: 0, y: 0 })
  const [loading, setLoading] = useState(false)
  const [saved, setSaved] = useState(false)
  const popupRef = useRef<HTMLDivElement>(null)
  
  // ë‹¨ì–´ í´ë¦­ í•¸ë“¤ëŸ¬
  const handleWordClick = async (word: string, event: React.MouseEvent) => {
    // êµ¬ë‘ì  ì œê±°
    const cleanWord = word.toLowerCase().replace(/[.,!?;:'"]/g, '')
    
    if (!cleanWord || cleanWord.length < 2) return
    
    setSelectedWord(cleanWord)
    setLoading(true)
    setSaved(false)
    
    // íŒì—… ìœ„ì¹˜ ê³„ì‚°
    const rect = (event.target as HTMLElement).getBoundingClientRect()
    setPopupPosition({
      x: rect.left + rect.width / 2,
      y: rect.top - 10
    })
    
    try {
      // ë‹¨ì–´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
      const response = await fetch(`/api/vocabulary/word?word=${cleanWord}`)
      const data = await response.json()
      
      if (data.word) {
        setWordData(data.word)
      } else {
        // DBì— ì—†ìœ¼ë©´ ì™¸ë¶€ API ì‚¬ìš©
        const dictResponse = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${cleanWord}`)
        if (dictResponse.ok) {
          const dictData = await dictResponse.json()
          const firstEntry = dictData[0]
          const firstMeaning = firstEntry.meanings[0]
          
          setWordData({
            word: cleanWord,
            definition: firstMeaning.definitions[0].definition,
            phonetic: firstEntry.phonetic || '',
            part_of_speech: firstMeaning.partOfSpeech,
            example_sentence: firstMeaning.definitions[0].example || ''
          })
        } else {
          setWordData({
            word: cleanWord,
            definition: 'ì‚¬ì „ì—ì„œ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
            phonetic: '',
            part_of_speech: '',
            example_sentence: ''
          })
        }
      }
    } catch (error) {
      console.error('Failed to fetch word:', error)
      setWordData({
        word: cleanWord,
        definition: 'ë‹¨ì–´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
        phonetic: '',
        part_of_speech: '',
        example_sentence: ''
      })
    } finally {
      setLoading(false)
    }
    
    onWordClick?.(cleanWord)
  }
  
  // ë°œìŒ ë“£ê¸°
  const handlePronounce = () => {
    if (!selectedWord) return
    
    const utterance = new SpeechSynthesisUtterance(selectedWord)
    utterance.lang = 'en-US'
    utterance.rate = 0.8
    window.speechSynthesis.speak(utterance)
  }
  
  // ë‹¨ì–´ì¥ì— ì €ì¥
  const handleSave = async () => {
    if (!wordData) return
    
    try {
      const response = await fetch('/api/vocabulary/save', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ word: wordData.word })
      })
      
      if (response.ok) {
        setSaved(true)
        setTimeout(() => setSaved(false), 2000)
      }
    } catch (error) {
      console.error('Failed to save word:', error)
    }
  }
  
  // ì™¸ë¶€ í´ë¦­ ì‹œ íŒì—… ë‹«ê¸°
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (popupRef.current && !popupRef.current.contains(event.target as Node)) {
        setSelectedWord(null)
        setWordData(null)
      }
    }
    
    document.addEventListener('mousedown', handleClickOutside)
    return () => document.removeEventListener('mousedown', handleClickOutside)
  }, [])
  
  // í…ìŠ¤íŠ¸ë¥¼ ë‹¨ì–´ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ê³  í´ë¦­ ê°€ëŠ¥í•˜ê²Œ
  const words = text.split(/(\s+)/)
  
  return (
    <div className="relative">
      <div className="leading-relaxed">
        {words.map((word, index) => {
          if (word.trim()) {
            return (
              <span
                key={index}
                onClick={(e) => handleWordClick(word, e)}
                className="cursor-pointer hover:bg-blue-100 hover:text-blue-700 rounded px-0.5 transition-colors"
              >
                {word}
              </span>
            )
          }
          return <span key={index}>{word}</span>
        })}
      </div>
      
      {/* ë‹¨ì–´ íŒì—… */}
      {selectedWord && (
        <div
          ref={popupRef}
          className="fixed z-50 bg-white rounded-xl shadow-2xl border border-gray-200 p-4 max-w-sm w-80"
          style={{
            left: `${popupPosition.x}px`,
            top: `${popupPosition.y}px`,
            transform: 'translate(-50%, -100%)'
          }}
        >
          {loading ? (
            <div className="flex items-center justify-center py-4">
              <div className="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600" />
            </div>
          ) : wordData ? (
            <>
              {/* í—¤ë” */}
              <div className="flex items-start justify-between mb-3">
                <div className="flex-1">
                  <h4 className="text-lg font-bold text-gray-900">
                    {wordData.word}
                  </h4>
                  {wordData.phonetic && (
                    <p className="text-sm text-gray-500 mt-0.5">
                      {wordData.phonetic}
                    </p>
                  )}
                  {wordData.part_of_speech && (
                    <span className="inline-block mt-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full">
                      {wordData.part_of_speech}
                    </span>
                  )}
                </div>
                
                <div className="flex gap-2 ml-2">
                  <button
                    onClick={handlePronounce}
                    className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                    title="ë°œìŒ ë“£ê¸°"
                  >
                    <Volume2 className="w-4 h-4 text-gray-600" />
                  </button>
                  <button
                    onClick={handleSave}
                    className={`p-2 rounded-lg transition-colors ${
                      saved
                        ? 'bg-green-100 text-green-600'
                        : 'hover:bg-gray-100 text-gray-600'
                    }`}
                    title="ë‹¨ì–´ì¥ì— ì €ì¥"
                  >
                    {saved ? (
                      <Check className="w-4 h-4" />
                    ) : (
                      <BookmarkPlus className="w-4 h-4" />
                    )}
                  </button>
                </div>
              </div>
              
              {/* ëœ» */}
              <div className="mb-3">
                <p className="text-sm font-semibold text-gray-700 mb-1">ëœ»:</p>
                <p className="text-sm text-gray-900">{wordData.definition}</p>
              </div>
              
              {/* ì˜ˆë¬¸ */}
              {wordData.example_sentence && (
                <div>
                  <p className="text-sm font-semibold text-gray-700 mb-1">ì˜ˆë¬¸:</p>
                  <p className="text-sm text-gray-600 italic">
                    "{wordData.example_sentence}"
                  </p>
                </div>
              )}
            </>
          ) : null}
        </div>
      )}
    </div>
  )
}
```

=== ListeningCardLongì— ClickableText ì¶”ê°€ ===

components/listening/ListeningCardLong.tsx ìˆ˜ì •:
```tsx
import ClickableText from './ClickableText'

// ìŠ¤í¬ë¦½íŠ¸ ë¶€ë¶„ ìˆ˜ì •:
{showScript && (
  <div className="bg-gray-50 rounded-xl border border-gray-200 p-6">
    <h3 className="font-semibold text-gray-900 mb-4">
      ì „ì²´ ìŠ¤í¬ë¦½íŠ¸
      <span className="text-sm text-gray-500 font-normal ml-2">
        (ë‹¨ì–´ë¥¼ í´ë¦­í•˜ë©´ ëœ»ì„ ë³¼ ìˆ˜ ìˆì–´ìš”)
      </span>
    </h3>
    <div className="space-y-4">
      {lesson.paragraphs.map((para, index) => (
        <div
          key={index}
          className={`p-4 rounded-lg transition-colors ${
            currentSentence === index
              ? 'bg-yellow-50 border-2 border-yellow-300'
              : 'bg-white border border-gray-200'
          }`}
        >
          <div className="text-gray-900 mb-2 leading-relaxed">
            <ClickableText text={para.text} />
          </div>
          {showTranslation && (
            <p className="text-sm text-gray-600 pt-2 border-t">
              {para.translation}
            </p>
          )}
        </div>
      ))}
    </div>
  </div>
)}
```

=== ë‹¨ì–´ì¥ í˜ì´ì§€ ===

app/learn/vocabulary/page.tsx ìƒì„±:
```tsx
'use client'

import { useEffect, useState } from 'react'
import { BookOpen, Volume2, Trash2, Check, X } from 'lucide-react'
import Link from 'next/link'

interface SavedWord {
  id: string
  word: string
  definition: string
  phonetic?: string
  part_of_speech?: string
  example_sentence?: string
  learned: boolean
  times_reviewed: number
  created_at: string
}

export default function VocabularyPage() {
  const [words, setWords] = useState<SavedWord[]>([])
  const [loading, setLoading] = useState(true)
  const [filter, setFilter] = useState<'all' | 'learning' | 'learned'>('all')
  
  useEffect(() => {
    fetchWords()
  }, [])
  
  const fetchWords = async () => {
    try {
      const response = await fetch('/api/vocabulary/saved')
      const data = await response.json()
      setWords(data.words || [])
    } catch (error) {
      console.error('Failed to fetch words:', error)
    } finally {
      setLoading(false)
    }
  }
  
  const handlePronounce = (word: string) => {
    const utterance = new SpeechSynthesisUtterance(word)
    utterance.lang = 'en-US'
    utterance.rate = 0.8
    window.speechSynthesis.speak(utterance)
  }
  
  const handleToggleLearned = async (wordId: string, currentStatus: boolean) => {
    try {
      await fetch('/api/vocabulary/update', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          wordId: wordId,
          learned: !currentStatus
        })
      })
      fetchWords()
    } catch (error) {
      console.error('Failed to update word:', error)
    }
  }
  
  const handleDelete = async (wordId: string) => {
    if (!confirm('ì´ ë‹¨ì–´ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return
    
    try {
      await fetch(`/api/vocabulary/delete?wordId=${wordId}`, {
        method: 'DELETE'
      })
      fetchWords()
    } catch (error) {
      console.error('Failed to delete word:', error)
    }
  }
  
  const filteredWords = words.filter(word => {
    if (filter === 'learned') return word.learned
    if (filter === 'learning') return !word.learned
    return true
  })
  
  if (loading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600" />
      </div>
    )
  }
  
  if (words.length === 0) {
    return (
      <div className="flex flex-col items-center justify-center h-64 text-center px-4">
        <BookOpen className="w-16 h-16 text-gray-300 mb-4" />
        <h3 className="text-xl font-semibold text-gray-900 mb-2">
          ë‹¨ì–´ì¥ì´ ë¹„ì–´ìˆì–´ìš”
        </h3>
        <p className="text-gray-600 mb-6">
          Listening ì—°ìŠµ ì¤‘ ë‹¨ì–´ë¥¼ í´ë¦­í•´ì„œ ì €ì¥í•´ë³´ì„¸ìš”!
        </p>
        <Link
          href="/learn/listening"
          className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
        >
          Listening ì—°ìŠµí•˜ê¸°
        </Link>
      </div>
    )
  }
  
  return (
    <div className="max-w-4xl mx-auto p-6">
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-gray-900 mb-2">ë‚˜ì˜ ë‹¨ì–´ì¥</h1>
        <p className="text-gray-600">ì €ì¥í•œ ë‹¨ì–´ë¥¼ ë³µìŠµí•˜ì„¸ìš”</p>
      </div>
      
      {/* í•„í„° */}
      <div className="bg-white rounded-xl border border-gray-200 p-4 mb-6">
        <div className="flex gap-2">
          <button
            onClick={() => setFilter('all')}
            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
              filter === 'all'
                ? 'bg-blue-600 text-white'
                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
            }`}
          >
            ì „ì²´ ({words.length})
          </button>
          <button
            onClick={() => setFilter('learning')}
            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
              filter === 'learning'
                ? 'bg-blue-600 text-white'
                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
            }`}
          >
            í•™ìŠµ ì¤‘ ({words.filter(w => !w.learned).length})
          </button>
          <button
            onClick={() => setFilter('learned')}
            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
              filter === 'learned'
                ? 'bg-blue-600 text-white'
                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
            }`}
          >
            ì™¸ìš´ ë‹¨ì–´ ({words.filter(w => w.learned).length})
          </button>
        </div>
      </div>
      
      {/* ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ */}
      <div className="space-y-3">
        {filteredWords.map((word) => (
          <div
            key={word.id}
            className="bg-white rounded-xl border border-gray-200 p-5 hover:border-blue-300 hover:shadow-md transition-all"
          >
            <div className="flex items-start justify-between">
              <div className="flex-1">
                <div className="flex items-center gap-3 mb-2">
                  <h3 className="text-xl font-bold text-gray-900">
                    {word.word}
                  </h3>
                  {word.phonetic && (
                    <span className="text-sm text-gray-500">
                      {word.phonetic}
                    </span>
                  )}
                  {word.part_of_speech && (
                    <span className="px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full">
                      {word.part_of_speech}
                    </span>
                  )}
                </div>
                
                <p className="text-gray-700 mb-3">
                  {word.definition}
                </p>
                
                {word.example_sentence && (
                  <p className="text-sm text-gray-600 italic mb-3">
                    "{word.example_sentence}"
                  </p>
                )}
                
                <div className="flex items-center gap-4 text-xs text-gray-500">
                  <span>ë³µìŠµ {word.times_reviewed}íšŒ</span>
                  <span>
                    {new Date(word.created_at).toLocaleDateString('ko-KR')}
                  </span>
                </div>
              </div>
              
              <div className="flex flex-col gap-2 ml-4">
                <button
                  onClick={() => handlePronounce(word.word)}
                  className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                  title="ë°œìŒ ë“£ê¸°"
                >
                  <Volume2 className="w-5 h-5 text-gray-600" />
                </button>
                
                <button
                  onClick={() => handleToggleLearned(word.id, word.learned)}
                  className={`p-2 rounded-lg transition-colors ${
                    word.learned
                      ? 'bg-green-100 text-green-600 hover:bg-green-200'
                      : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                  }`}
                  title={word.learned ? 'í•™ìŠµ ì¤‘ìœ¼ë¡œ ë³€ê²½' : 'ì™¸ì› ìŒìœ¼ë¡œ í‘œì‹œ'}
                >
                  {word.learned ? (
                    <Check className="w-5 h-5" />
                  ) : (
                    <X className="w-5 h-5" />
                  )}
                </button>
                
                <button
                  onClick={() => handleDelete(word.id)}
                  className="p-2 hover:bg-red-100 hover:text-red-600 rounded-lg transition-colors"
                  title="ì‚­ì œ"
                >
                  <Trash2 className="w-5 h-5 text-gray-600" />
                </button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  )
}
```

=== API ì—”ë“œí¬ì¸íŠ¸ë“¤ ===

1. app/api/vocabulary/word/route.ts (ë‹¨ì–´ ì¡°íšŒ):
```tsx
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs'
import { cookies } from 'next/headers'
import { NextResponse } from 'next/server'

export async function GET(req: Request) {
  try {
    const { searchParams } = new URL(req.url)
    const word = searchParams.get('word')
    
    if (!word) {
      return NextResponse.json(
        { error: 'Word parameter required' },
        { status: 400 }
      )
    }
    
    const supabase = createRouteHandlerClient({ cookies })
    
    const { data, error } = await supabase
      .from('vocabulary_words')
      .select('*')
      .ilike('word', word)
      .single()
    
    if (error) {
      return NextResponse.json({ word: null })
    }
    
    return NextResponse.json({ word: data })
  } catch (error) {
    console.error('Word fetch error:', error)
    return NextResponse.json({ word: null })
  }
}
```

2. app/api/vocabulary/save/route.ts (ë‹¨ì–´ì¥ ì €ì¥):
```tsx
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs'
import { cookies } from 'next/headers'
import { NextResponse } from 'next/server'

export async function POST(req: Request) {
  try {
    const supabase = createRouteHandlerClient({ cookies })
    
    const {
      data: { session },
    } = await supabase.auth.getSession()

    if (!session) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      )
    }

    const { word } = await req.json()
    
    // ë‹¨ì–´ ì°¾ê¸° ë˜ëŠ” ìƒì„±
    let wordData = await supabase
      .from('vocabulary_words')
      .select('id')
      .ilike('word', word)
      .single()
    
    let wordId: string
    
    if (wordData.data) {
      wordId = wordData.data.id
    } else {
      // ì™¸ë¶€ APIì—ì„œ ë‹¨ì–´ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      try {
        const dictResponse = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`)
        if (dictResponse.ok) {
          const dictData = await dictResponse.json()
          const firstEntry = dictData[0]
          const firstMeaning = firstEntry.meanings[0]
          
          const { data: newWord, error: createError } = await supabase
            .from('vocabulary_words')
            .insert({
              word: word.toLowerCase(),
              definition: firstMeaning.definitions[0].definition,
              phonetic: firstEntry.phonetic || '',
              part_of_speech: firstMeaning.partOfSpeech,
              example_sentence: firstMeaning.definitions[0].example || ''
            })
            .select()
            .single()
          
          if (createError) throw createError
          wordId = newWord.id
        } else {
          throw new Error('Dictionary API failed')
        }
      } catch (dictError) {
        // ê¸°ë³¸ ì •ë³´ë¡œ ìƒì„±
        const { data: newWord, error: createError } = await supabase
          .from('vocabulary_words')
          .insert({
            word: word.toLowerCase(),
            definition: 'Definition not available',
            phonetic: '',
            part_of_speech: 'unknown'
          })
          .select()
          .single()
        
        if (createError) throw createError
        wordId = newWord.id
      }
    }
    
    // ì‚¬ìš©ì ë‹¨ì–´ì¥ì— ì €ì¥
    const { error: saveError } = await supabase
      .from('user_vocabulary')
      .upsert({
        user_id: session.user.id,
        word_id: wordId
      })
    
    if (saveError) throw saveError
    
    return NextResponse.json({ success: true })
  } catch (error) {
    console.error('Save word error:', error)
    return NextResponse.json(
      { error: 'Failed to save word' },
      { status: 500 }
    )
  }
}
```

3. app/api/vocabulary/saved/route.ts (ì €ì¥ëœ ë‹¨ì–´ ëª©ë¡):
```tsx
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs'
import { cookies } from 'next/headers'
import { NextResponse } from 'next/server'

export async function GET(req: Request) {
  try {
    const supabase = createRouteHandlerClient({ cookies })
    
    const {
      data: { session },
    } = await supabase.auth.getSession()

    if (!session) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      )
    }

    const { data, error } = await supabase
      .from('user_vocabulary')
      .select(`
        id,
        learned,
        times_reviewed,
        created_at,
        vocabulary_words (
          word,
          definition,
          phonetic,
          part_of_speech,
          example_sentence
        )
      `)
      .eq('user_id', session.user.id)
      .order('created_at', { ascending: false })
    
    if (error) throw error
    
    // ë°ì´í„° í‰íƒ„í™”
    const words = data.map(item => ({
      id: item.id,
      word: item.vocabulary_words.word,
      definition: item.vocabulary_words.definition,
      phonetic: item.vocabulary_words.phonetic,
      part_of_speech: item.vocabulary_words.part_of_speech,
      example_sentence: item.vocabulary_words.example_sentence,
      learned: item.learned,
      times_reviewed: item.times_reviewed,
      created_at: item.created_at
    }))
    
    return NextResponse.json({ words })
  } catch (error) {
    console.error('Fetch saved words error:', error)
    return NextResponse.json(
      { error: 'Failed to fetch words' },
      { status: 500 }
    )
  }
}
```

4. app/api/vocabulary/update/route.ts (ë‹¨ì–´ ìƒíƒœ ì—…ë°ì´íŠ¸):
```tsx
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs'
import { cookies } from 'next/headers'
import { NextResponse } from 'next/server'

export async function POST(req: Request) {
  try {
    const supabase = createRouteHandlerClient({ cookies })
    
    const {
      data: { session },
    } = await supabase.auth.getSession()

    if (!session) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      )
    }

    const { wordId, learned } = await req.json()
    
    const { error } = await supabase
      .from('user_vocabulary')
      .update({
        learned: learned,
        times_reviewed: learned 
          ? supabase.rpc('increment_times_reviewed', { row_id: wordId })
          : undefined,
        last_reviewed_at: new Date().toISOString()
      })
      .eq('id', wordId)
      .eq('user_id', session.user.id)
    
    if (error) throw error
    
    return NextResponse.json({ success: true })
  } catch (error) {
    console.error('Update word error:', error)
    return NextResponse.json(
      { error: 'Failed to update word' },
      { status: 500 }
    )
  }
}
```

5. app/api/vocabulary/delete/route.ts (ë‹¨ì–´ ì‚­ì œ):
```tsx
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs'
import { cookies } from 'next/headers'
import { NextResponse } from 'next/server'

export async function DELETE(req: Request) {
  try {
    const { searchParams } = new URL(req.url)
    const wordId = searchParams.get('wordId')
    
    const supabase = createRouteHandlerClient({ cookies })
    
    const {
      data: { session },
    } = await supabase.auth.getSession()

    if (!session) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      )
    }

    const { error } = await supabase
      .from('user_vocabulary')
      .delete()
      .eq('id', wordId)
      .eq('user_id', session.user.id)
    
    if (error) throw error
    
    return NextResponse.json({ success: true })
  } catch (error) {
    console.error('Delete word error:', error)
    return NextResponse.json(
      { error: 'Failed to delete word' },
      { status: 500 }
    )
  }
}
```

=== ì‚¬ì´ë“œë°” ë©”ë‰´ ì—…ë°ì´íŠ¸ ===

ê¸°ì¡´ ì‚¬ì´ë“œë°”ì— Vocabulary ë©”ë‰´ ì¶”ê°€:

Vocabulary ë©”ë‰´:
- ì•„ì´ì½˜: ğŸ“š ë˜ëŠ” <BookOpen />
- ë§í¬: /learn/vocabulary
- ë‹¨ì¼ í˜ì´ì§€ (í•˜ìœ„ ë©”ë‰´ ì—†ìŒ)

=== ì¶œë ¥ ìš”êµ¬ì‚¬í•­ ===

1. âœ… vocabulary_words í…Œì´ë¸” ìƒì„±
2. âœ… user_vocabulary í…Œì´ë¸” ìƒì„±
3. âœ… ê¸°ë³¸ ë‹¨ì–´ 50-100ê°œ ì¶”ê°€
4. âœ… ClickableText ì»´í¬ë„ŒíŠ¸
5. âœ… ë‹¨ì–´ í´ë¦­ â†’ ëœ» íŒì—…
6. âœ… ë°œìŒ ë“£ê¸° ë²„íŠ¼
7. âœ… ë‹¨ì–´ì¥ ì €ì¥ ë²„íŠ¼
8. âœ… ì™¸ë¶€ ì‚¬ì „ API ì—°ë™ (fallback)
9. âœ… ë‹¨ì–´ì¥ í˜ì´ì§€ (/learn/vocabulary)
10. âœ… í•„í„° (ì „ì²´/í•™ìŠµì¤‘/ì™¸ìš´ë‹¨ì–´)
11. âœ… ì™¸ì› ìŒ í† ê¸€
12. âœ… ë‹¨ì–´ ì‚­ì œ
13. âœ… API ì—”ë“œí¬ì¸íŠ¸ 5ê°œ
14. âœ… ëª¨ë°”ì¼ ë°˜ì‘í˜•

ì™„ì„± í›„:
- Listening Phase 2 ì™„ë£Œ!
- ë‹¨ì–´ ì‚¬ì „ ê¸°ëŠ¥ ì™„ì„±
- ë‹¨ì–´ì¥ ì‹œìŠ¤í…œ ì™„ì„±
- ë‚´ì¼ Phase 3 (ì½˜í…ì¸  ëŒ€ëŸ‰ ì¶”ê°€)

í…ŒìŠ¤íŠ¸:
1. Listening ê¸´ ì»¨í…ì¸  ì—´ê¸°
2. ìŠ¤í¬ë¦½íŠ¸ ë³´ê¸°
3. ë‹¨ì–´ í´ë¦­ â†’ íŒì—… í™•ì¸
4. ë°œìŒ ë“£ê¸°
5. ë‹¨ì–´ì¥ ì €ì¥
6. /learn/vocabulary ì ‘ì†
7. ì €ì¥ëœ ë‹¨ì–´ í™•ì¸
8. ì™¸ì› ìŒ í† ê¸€
9. ë‹¨ì–´ ì‚­ì œ

ì§€ê¸ˆ ë°”ë¡œ ë§Œë“¤ì–´ì¤˜!
ì™„ì„±ë˜ë©´ ì•Œë ¤ì¤˜!
```

---

## â° **ì˜ˆìƒ ì†Œìš” ì‹œê°„**

- Replit Agent êµ¬í˜„: 3-4ì‹œê°„

---

## ğŸ‰ **ì™„ì„±ë˜ë©´**

**Phase 2 ì™„ë£Œ!**
```
âœ… Phase 1: ê¸´ ì»¨í…ì¸  + ì†ë„ ì¡°ì ˆ
âœ… Phase 2: ë‹¨ì–´ ì‚¬ì „ + ë‹¨ì–´ì¥

ë‹¤ìŒ (Phase 3):
- ì½˜í…ì¸  ëŒ€ëŸ‰ ì¶”ê°€ (20-30ê°œ)
- ë‹¤ì–‘í•œ ì£¼ì œ (ë‰´ìŠ¤, ëª…ì–¸, ë¬¸í•™ ë“±)

â†’ ë‚´ì¼ ì™„ì„±í•˜ë©´ Listening 100%!